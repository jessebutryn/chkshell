#!/usr/bin/env bash
#
# set -x
#######################################
if [[ -f "${0%/*}/../lib/general.sh" ]]; then
	. "${0%/*}/../lib/general.sh"
else
	echo "Error! lib/general.sh not found!"
	exit 1
fi
#######################################
shells=( $( grep '^/' /etc/shells ) )
#######################################
(($#<1)) && usage
while getopts c:s:h opt; do
	case $opt in
		c)	c=$OPTARG;;
		s)	s=$OPTARG;;
		h)	usage;;
	esac
done
#######################################
[[ -n $s ]] && shells=( $( filter_shells "$s" "${shells[@]}" ) )
for s in "${shells[@]}"; do
	execute_command "$s" "$c" 2>&1
done
